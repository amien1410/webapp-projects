const a0_0x2bfa98=a0_0x5da2;(function(_0x53b08d,_0x5de9d8){const _0x10b36f=a0_0x5da2,_0x599e61=_0x53b08d();while(!![]){try{const _0x461ce0=-parseInt(_0x10b36f(0x1d4))/0x1+parseInt(_0x10b36f(0x21a))/0x2*(-parseInt(_0x10b36f(0x21b))/0x3)+-parseInt(_0x10b36f(0x1d6))/0x4*(parseInt(_0x10b36f(0x1e5))/0x5)+parseInt(_0x10b36f(0x250))/0x6*(parseInt(_0x10b36f(0x209))/0x7)+-parseInt(_0x10b36f(0x24d))/0x8+-parseInt(_0x10b36f(0x204))/0x9*(-parseInt(_0x10b36f(0x1dd))/0xa)+-parseInt(_0x10b36f(0x1d1))/0xb;if(_0x461ce0===_0x5de9d8)break;else _0x599e61['push'](_0x599e61['shift']());}catch(_0x42cc1f){_0x599e61['push'](_0x599e61['shift']());}}}(a0_0xa63d,0x21930));const express=require(a0_0x2bfa98(0x1e3)),bodyParser=require('body-parser'),dotenv=require(a0_0x2bfa98(0x1de)),db=require('./models'),upload=require('./middleware/upload');dotenv[a0_0x2bfa98(0x1e7)]();const cors=require('cors'),fs=require('fs'),no_auth_route=require(a0_0x2bfa98(0x1d9)),auth_routes=require(a0_0x2bfa98(0x232)),admin_routes=require('./routes/Admin.routes'),http=require(a0_0x2bfa98(0x22f)),path=require('path'),socketIo=require('socket.io'),app=express(),server=http[a0_0x2bfa98(0x239)](app),{UserSocket,Language_status}=require('./models'),{Op}=require(a0_0x2bfa98(0x20b)),jwt=require(a0_0x2bfa98(0x257)),os=require('os'),getmac=require(a0_0x2bfa98(0x1fc))[a0_0x2bfa98(0x1e9)],axios=require('axios'),{checkWebsettingAndCreate}=require('./controller/Admin/webSettingController'),io=socketIo(server,{'cors':{'origin':!![]},'path':a0_0x2bfa98(0x1eb)}),port=process[a0_0x2bfa98(0x222)][a0_0x2bfa98(0x206)]||0xbb8,authMiddleware=require('./middleware/authMiddleware'),socketService=require(a0_0x2bfa98(0x254)),cron=require(a0_0x2bfa98(0x23f)),{removeStatusAfter24Hours}=require(a0_0x2bfa98(0x1fd));function a0_0x5da2(_0x537f53,_0x1e5394){const _0xa63d4b=a0_0xa63d();return a0_0x5da2=function(_0x5da2e3,_0x4266af){_0x5da2e3=_0x5da2e3-0x1ce;let _0x4c12cb=_0xa63d4b[_0x5da2e3];return _0x4c12cb;},a0_0x5da2(_0x537f53,_0x1e5394);}app[a0_0x2bfa98(0x24e)](cors({'origin':'*'})),app[a0_0x2bfa98(0x24e)](bodyParser['json']()),app[a0_0x2bfa98(0x24e)](bodyParser[a0_0x2bfa98(0x248)]({'extended':!![]})),app[a0_0x2bfa98(0x24e)](upload[a0_0x2bfa98(0x210)](a0_0x2bfa98(0x224))),app['use'](a0_0x2bfa98(0x24f),express['static']('uploads')),app[a0_0x2bfa98(0x24e)](a0_0x2bfa98(0x22b),express['static'](a0_0x2bfa98(0x1d2))),cron['schedule'](a0_0x2bfa98(0x233),()=>{const _0x3c3f79=a0_0x2bfa98,_0x3ad3db={'YulOp':function(_0x31fcc9){return _0x31fcc9();}};_0x3ad3db[_0x3c3f79(0x231)](removeStatusAfter24Hours);});const validatePurchaseCode=async(_0x47db2d,_0x5b3f01,_0x7edea5)=>{const _0x44d3c5=a0_0x2bfa98,_0x35e2fe={'GCszR':_0x44d3c5(0x1d5),'GUJap':'public','qfCuc':'validate.html','hmrnf':function(_0x16ac6c){return _0x16ac6c();},'DqtlD':function(_0x21a7f7){return _0x21a7f7();}};if(!fs[_0x44d3c5(0x22e)](_0x35e2fe[_0x44d3c5(0x255)]))return _0x5b3f01[_0x44d3c5(0x1d0)](path[_0x44d3c5(0x22a)](__dirname,_0x35e2fe[_0x44d3c5(0x216)],_0x35e2fe[_0x44d3c5(0x227)]));else{const _0x20222a=await _0x35e2fe[_0x44d3c5(0x1ee)](verifyToken);if(!_0x20222a)return _0x5b3f01[_0x44d3c5(0x1d0)](path[_0x44d3c5(0x22a)](__dirname,_0x35e2fe[_0x44d3c5(0x216)],_0x35e2fe['qfCuc']));}_0x35e2fe[_0x44d3c5(0x220)](_0x7edea5);};app['use']((_0x2b00c6,_0x2a228b,_0x239555)=>{const _0x4c97a3=a0_0x2bfa98,_0x173e48={'RvNso':function(_0x123cd6,_0x5df2b4){return _0x123cd6===_0x5df2b4;},'wClDc':_0x4c97a3(0x23e),'dAnAE':function(_0x45f690){return _0x45f690();},'fpEqx':function(_0x1db52f,_0x1ea6e3,_0xcba0aa,_0x5e31bc){return _0x1db52f(_0x1ea6e3,_0xcba0aa,_0x5e31bc);}};if(_0x173e48['RvNso'](_0x2b00c6[_0x4c97a3(0x249)],_0x173e48[_0x4c97a3(0x1f9)]))return _0x173e48[_0x4c97a3(0x1ec)](_0x239555);_0x173e48['fpEqx'](validatePurchaseCode,_0x2b00c6,_0x2a228b,_0x239555);}),app['post']('/api/validate',async(_0x13cc41,_0x4ef9e2)=>{const _0x1a33b7=a0_0x2bfa98,_0x3e2e68={'CgaAE':_0x1a33b7(0x1fe),'CAHuy':'Unable\x20to\x20retrieve\x20MAC\x20address.','dnOaQ':_0x1a33b7(0x205),'JqmKg':_0x1a33b7(0x245),'jafYK':_0x1a33b7(0x207),'ijqUz':_0x1a33b7(0x235),'FKSzC':_0x1a33b7(0x202),'ftBuV':function(_0x223312){return _0x223312();},'amxsN':function(_0x381712){return _0x381712();},'mroQT':function(_0x51e070,_0x2f639f){return _0x51e070==_0x2f639f;},'mNTUk':_0x1a33b7(0x218),'KBrDK':'error','vhTVJ':function(_0x563024,_0x186809){return _0x563024==_0x186809;},'lgPtw':_0x1a33b7(0x228),'NBZPW':_0x1a33b7(0x234)};console[_0x1a33b7(0x1ef)](_0x3e2e68['CgaAE'],_0x13cc41[_0x1a33b7(0x244)]),console[_0x1a33b7(0x1ef)](_0x1a33b7(0x214),_0x13cc41[_0x1a33b7(0x1e2)]);const _0x491032=getMacAddress(),_0x435419=_0x13cc41['ip'],{purchase_code:_0x397ff2,username:_0x40f333}=_0x13cc41['body'];if(!_0x491032)return _0x4ef9e2[_0x1a33b7(0x219)](0x1f4)[_0x1a33b7(0x258)]({'error':_0x3e2e68[_0x1a33b7(0x21e)]});if(!_0x397ff2)return _0x4ef9e2[_0x1a33b7(0x219)](0x190)[_0x1a33b7(0x258)]({'error':_0x3e2e68['dnOaQ']});if(!_0x40f333)return _0x4ef9e2[_0x1a33b7(0x219)](0x190)[_0x1a33b7(0x258)]({'error':_0x3e2e68['JqmKg']});try{const _0x1ffe6e=await axios[_0x1a33b7(0x243)](_0x3e2e68['jafYK'],{'purchase_code':_0x397ff2,'username':_0x40f333},{'headers':{'Content-Type':_0x3e2e68[_0x1a33b7(0x23d)],'Accept':_0x3e2e68[_0x1a33b7(0x23d)],'User-Agent':_0x3e2e68['FKSzC'],'X-MAC-Address':_0x3e2e68['ftBuV'](getMacAddress),'X-Device-IP':_0x3e2e68[_0x1a33b7(0x1f4)](getServerIP)}});console[_0x1a33b7(0x1ef)](_0x1ffe6e);if(_0x3e2e68[_0x1a33b7(0x1f3)](_0x1ffe6e[_0x1a33b7(0x1d8)]['status'],_0x3e2e68[_0x1a33b7(0x240)]))return _0x4ef9e2[_0x1a33b7(0x219)](0x190)[_0x1a33b7(0x258)]({'error':_0x1ffe6e[_0x1a33b7(0x1d8)]['message']});if(_0x3e2e68[_0x1a33b7(0x1f3)](_0x1ffe6e[_0x1a33b7(0x1d8)]['status'],_0x3e2e68[_0x1a33b7(0x20a)]))return _0x4ef9e2[_0x1a33b7(0x219)](0x190)[_0x1a33b7(0x258)]({'error':_0x1ffe6e['data'][_0x1a33b7(0x246)]});if(_0x3e2e68[_0x1a33b7(0x225)](_0x1ffe6e[_0x1a33b7(0x1d8)][_0x1a33b7(0x219)],_0x3e2e68[_0x1a33b7(0x1d7)]))return _0x4ef9e2[_0x1a33b7(0x219)](0x190)[_0x1a33b7(0x258)]({'error':_0x1ffe6e[_0x1a33b7(0x1d8)][_0x1a33b7(0x246)]});const {token:_0x28e12e}=_0x1ffe6e[_0x1a33b7(0x1d8)];fs[_0x1a33b7(0x1e1)](_0x1a33b7(0x1d5),_0x28e12e),_0x4ef9e2[_0x1a33b7(0x258)]({'message':_0x1a33b7(0x1f8),'token':_0x28e12e});}catch(_0x1c83cc){console[_0x1a33b7(0x1d3)](_0x3e2e68[_0x1a33b7(0x21c)],_0x1c83cc),_0x4ef9e2[_0x1a33b7(0x219)](0x190)[_0x1a33b7(0x258)]({'error':'Validation\x20failed!'});}});async function verifyToken(){const _0x16d398=a0_0x2bfa98,_0x318041={'JlhMG':'validatedToken.txt','AdUuT':'http://62.72.36.245:1142/verify_new','MhvZA':function(_0x1d03ba){return _0x1d03ba();},'IVvgJ':function(_0x453427){return _0x453427();},'UsLyv':_0x16d398(0x21d)},_0x1c5ace=path['join'](__dirname,_0x318041[_0x16d398(0x256)]);if(!fs[_0x16d398(0x22e)](_0x1c5ace))return console['log'](_0x16d398(0x1fb)),![];try{const _0x304a76=await fs[_0x16d398(0x20f)][_0x16d398(0x1db)](_0x1c5ace,_0x16d398(0x1ff)),_0xe58b1a=await axios[_0x16d398(0x243)](_0x318041[_0x16d398(0x242)],{'server_ip':_0x318041[_0x16d398(0x1f2)](getServerIP),'mac_address':_0x318041[_0x16d398(0x247)](getMacAddress),'token':_0x304a76});if(!_0xe58b1a[_0x16d398(0x1d8)][_0x16d398(0x1f6)])return console['log'](_0x318041['UsLyv']),![];return _0xe58b1a[_0x16d398(0x1d8)][_0x16d398(0x1f6)];}catch(_0x3e120d){return console[_0x16d398(0x1d3)](_0x16d398(0x1f0),_0x3e120d),![];}}app[a0_0x2bfa98(0x24e)](express['static'](path[a0_0x2bfa98(0x22a)](__dirname,a0_0x2bfa98(0x20e))));function getMacAddress(){const _0x15d6a5=a0_0x2bfa98,_0xadae7={'ijeDk':function(_0x3ee5e0){return _0x3ee5e0();},'lWgzE':_0x15d6a5(0x23a)};try{const _0x34e56e=_0xadae7['ijeDk'](getmac);return _0x34e56e;}catch(_0x54cdb1){return console['error'](_0xadae7['lWgzE'],_0x54cdb1),null;}}function getServerIP(){const _0x553d5b=a0_0x2bfa98,_0x244a9e={'KEnrI':_0x553d5b(0x1da),'WEgqc':'IP\x20address\x20not\x20found'},_0x43da35=os['networkInterfaces']();for(const _0x5270c6 in _0x43da35){for(const _0x33132c of _0x43da35[_0x5270c6]){if(_0x33132c[_0x553d5b(0x23b)]===_0x244a9e['KEnrI']&&!_0x33132c[_0x553d5b(0x221)])return _0x33132c[_0x553d5b(0x201)];}}return _0x244a9e['WEgqc'];}app['get']('/',async(_0x3bc480,_0x3b7454)=>{const _0xbd2d29=a0_0x2bfa98,_0x45f41c={'FHGpM':_0xbd2d29(0x20d)};try{return _0x3b7454[_0xbd2d29(0x1d0)](path[_0xbd2d29(0x22a)](__dirname,_0xbd2d29(0x20e),_0x45f41c[_0xbd2d29(0x1e8)]));}catch(_0x55a0e9){_0x3b7454[_0xbd2d29(0x219)](0x1f4)[_0xbd2d29(0x258)]({'error':_0x55a0e9[_0xbd2d29(0x246)]});}}),app[a0_0x2bfa98(0x24e)](a0_0x2bfa98(0x213),no_auth_route);const handleUserSocketAssociation=async(_0x1cda99,_0x21191b)=>{const _0x24398b=a0_0x2bfa98,_0x15f396={'HTQeX':function(_0x5be09a,_0x36134a){return _0x5be09a(_0x36134a);},'GVWEg':'Missing\x20token\x20during\x20connection.','XSuyF':function(_0x2b57f4){return _0x2b57f4();},'wcKZD':_0x24398b(0x200)};let _0x1e313e=_0x1cda99['handshake'][_0x24398b(0x226)]['token'],_0x1a25a8;if(!_0x1e313e)return _0x15f396[_0x24398b(0x1e0)](_0x21191b,new Error(_0x15f396['GVWEg']));try{let _0x49223d=process[_0x24398b(0x222)][_0x24398b(0x237)];_0x1a25a8=jwt[_0x24398b(0x223)](_0x1e313e,_0x49223d),_0x1cda99[_0x24398b(0x1f5)][_0x24398b(0x226)][_0x24398b(0x217)]=_0x1a25a8[_0x24398b(0x217)],_0x1cda99['handshake']['query'][_0x24398b(0x217)]=_0x1a25a8[_0x24398b(0x217)];}catch(_0x34ead0){return console[_0x24398b(0x1d3)](_0x34ead0),_0x21191b(new Error('Invalid\x20token'));}try{const _0x4515ad=_0x1cda99['handshake'][_0x24398b(0x226)][_0x24398b(0x217)];await UserSocket['create']({'user_id':_0x4515ad,'socketId':_0x1cda99['id']}),_0x15f396[_0x24398b(0x229)](_0x21191b);}catch(_0x1f9884){console[_0x24398b(0x1d3)](_0x15f396[_0x24398b(0x24c)],_0x1f9884),_0x15f396[_0x24398b(0x1e0)](_0x21191b,new Error(_0x24398b(0x1e4)));}};io[a0_0x2bfa98(0x24e)](handleUserSocketAssociation),socketService['initSocket'](io),app[a0_0x2bfa98(0x24e)](a0_0x2bfa98(0x213),authMiddleware,auth_routes),app[a0_0x2bfa98(0x24e)](a0_0x2bfa98(0x213),authMiddleware,admin_routes),app['get']('*',(_0x32dd5c,_0x4a74d9)=>{const _0x2a80fc=a0_0x2bfa98,_0x5efffe={'Fzxjx':_0x2a80fc(0x208),'hFVhS':_0x2a80fc(0x20d)};_0x4a74d9['sendFile'](path['join'](__dirname,_0x5efffe[_0x2a80fc(0x211)],_0x5efffe[_0x2a80fc(0x236)]));}),app['use']((_0x3e4497,_0x47bd8e,_0x1aa133,_0x3cf63c)=>{const _0x1a2815=a0_0x2bfa98,_0x4f6d3e={'rrgbp':_0x1a2815(0x1e6)};console['error'](_0x3e4497[_0x1a2815(0x1ed)]),_0x1aa133[_0x1a2815(0x219)](0x1f4)[_0x1a2815(0x258)]({'message':_0x4f6d3e[_0x1a2815(0x23c)],'success':![]});});const {addLanguageColumn,addDefaultEntries}=require('./reusable/add_new_language'),{checkAppFlowAndCreate}=require('./controller/Admin/AppFlow.Controller'),{checkAdminAndCreate}=require(a0_0x2bfa98(0x1f1)),{checkAppsettingAndCreate}=require(a0_0x2bfa98(0x1ce)),{checkOneSignalsettingAndCreate,checkGroupsettingAndCreate}=require(a0_0x2bfa98(0x20c));async function fetchLanguages(){const _0x167570=a0_0x2bfa98;try{const _0x4d60f6=await Language_status[_0x167570(0x1fa)](),_0x3da122=_0x4d60f6['map'](_0x420928=>{const _0x427196=_0x167570;return _0x420928[_0x427196(0x241)][_0x427196(0x253)];});return _0x3da122;}catch(_0x485bb9){console[_0x167570(0x1d3)](_0x167570(0x252),_0x485bb9);}}function a0_0xa63d(){const _0xcc509e=['vhTVJ','query','qfCuc','invalid','XSuyF','join','/public','KLohc','sync','existsSync','http','XtsGW','YulOp','./routes/AuthRoutes','0\x20*\x20*\x20*\x20*','Validation\x20error:','application/json','hFVhS','JWT_SECRET_KEY','zvHdV','createServer','Error\x20fetching\x20MAC\x20address:','family','rrgbp','ijqUz','/api/validate','node-cron','mNTUk','dataValues','AdUuT','post','headers','username\x20is\x20required.','message','IVvgJ','urlencoded','path','VISHf','listen','wcKZD','468032eoAOqI','use','/uploads','1644990YyUYQl','YatWR','Error\x20fetching\x20languages:','language','./reusable/socketService','GCszR','JlhMG','jsonwebtoken','json','./controller/Admin/appsettingController','qzSFq','sendFile','859507jvFFfc','public','error','26494wFzber','./validatedToken.txt','4EDuKWW','lgPtw','data','./routes/NoAuthRoutes','IPv4','readFile','Database\x20Connected\x20✅!','21550RtmBAJ','dotenv','UjPvX','HTQeX','writeFileSync','body','express','Error\x20storing\x20user/socket\x20association.','728215dmJwfi','Something\x20went\x20wrong!','config','FHGpM','default','RmXIx','/socket','dAnAE','stack','hmrnf','log','Error\x20during\x20token\x20verification:','./controller/Admin/admin.login','MhvZA','mroQT','amxsN','handshake','success','validatedToken.txt','Validation\x20successful!','wClDc','findAll','Token\x20file\x20does\x20not\x20exist.\x20No\x20verification\x20needed.','getmac','./controller/Status/removeStatusAfter24Hours','Received\x20Headers:','utf-8','Error\x20storing\x20user/socket\x20association:','address','Your\x20User\x20Agent','Server\x20listening\x20on\x20port\x20','1125YhluWV','Purchase\x20code\x20is\x20required.','PORT','http://62.72.36.245:1142/validate','admin','7vUGVMN','KBrDK','sequelize','./controller/Admin/oneSignalsettingController','index.html','/admin','promises','array','Fzxjx','No\x20languages\x20found.','/api','Received\x20Body:','Token\x20is\x20invalid.\x20Serving\x20validation\x20page.','GUJap','user_id','used','status','1706skwWTz','342IVGpef','NBZPW','Token\x20verification\x20failed.\x20Removing\x20current\x20directory...','CAHuy','length','DqtlD','internal','env','verify','files'];a0_0xa63d=function(){return _0xcc509e;};return a0_0xa63d();}db[a0_0x2bfa98(0x20b)][a0_0x2bfa98(0x22d)]({'alter':![]})['then'](async()=>{const _0x4058cf=a0_0x2bfa98,_0x31e5cd={'XtsGW':function(_0x4cf3f8){return _0x4cf3f8();},'KLohc':function(_0x5ac49e){return _0x5ac49e();},'RmXIx':_0x4058cf(0x1dc),'NQInB':_0x4058cf(0x1f7),'zvHdV':function(_0x5e1e63,_0x1ca2d3){return _0x5e1e63<_0x1ca2d3;},'VISHf':_0x4058cf(0x212),'hSaBl':_0x4058cf(0x215),'UjPvX':function(_0x4c25aa,_0x17d58c){return _0x4c25aa(_0x17d58c);},'WVyGy':_0x4058cf(0x1fb),'XqFnN':function(_0xbea974,_0x489f7a){return _0xbea974>_0x489f7a;},'qzSFq':function(_0x2d25fb,_0x4158fd){return _0x2d25fb<_0x4158fd;},'YatWR':function(_0x409b52,_0x40d041){return _0x409b52(_0x40d041);}};await _0x31e5cd[_0x4058cf(0x230)](checkAppFlowAndCreate),await _0x31e5cd[_0x4058cf(0x230)](checkAdminAndCreate),await _0x31e5cd[_0x4058cf(0x230)](checkAppsettingAndCreate),await _0x31e5cd['XtsGW'](checkWebsettingAndCreate),await _0x31e5cd[_0x4058cf(0x22c)](checkOneSignalsettingAndCreate),await _0x31e5cd[_0x4058cf(0x22c)](addDefaultEntries),await checkGroupsettingAndCreate(),console[_0x4058cf(0x1ef)](_0x31e5cd[_0x4058cf(0x1ea)]);const _0x204382=path[_0x4058cf(0x22a)](__dirname,_0x31e5cd['NQInB']);if(fs['existsSync'](_0x204382)){const _0x4cdc3a=await _0x31e5cd[_0x4058cf(0x22c)](verifyToken);if(_0x4cdc3a){const _0x50a705=await _0x31e5cd['XtsGW'](fetchLanguages);if(_0x50a705&&_0x50a705[_0x4058cf(0x21f)]>0x0)for(let _0x40d6ce=0x0;_0x31e5cd['zvHdV'](_0x40d6ce,_0x50a705[_0x4058cf(0x21f)]);_0x40d6ce++){const _0x27f1fb=_0x50a705[_0x40d6ce];await addLanguageColumn(_0x27f1fb);}else console[_0x4058cf(0x1ef)](_0x31e5cd[_0x4058cf(0x24a)]);}else{console[_0x4058cf(0x1ef)](_0x31e5cd['hSaBl']);const _0x54701c=await _0x31e5cd['KLohc'](fetchLanguages);if(_0x54701c&&_0x54701c[_0x4058cf(0x21f)]>0x0)for(let _0x150837=0x0;_0x31e5cd[_0x4058cf(0x238)](_0x150837,_0x54701c[_0x4058cf(0x21f)]);_0x150837++){const _0x415c12=_0x54701c[_0x150837];await _0x31e5cd[_0x4058cf(0x1df)](addLanguageColumn,_0x415c12);}else console[_0x4058cf(0x1ef)](_0x31e5cd[_0x4058cf(0x24a)]);}}else{console[_0x4058cf(0x1ef)](_0x31e5cd['WVyGy']);const _0x3d5b09=await fetchLanguages();if(_0x3d5b09&&_0x31e5cd['XqFnN'](_0x3d5b09[_0x4058cf(0x21f)],0x0))for(let _0x327418=0x0;_0x31e5cd[_0x4058cf(0x1cf)](_0x327418,_0x3d5b09[_0x4058cf(0x21f)]);_0x327418++){const _0x34d908=_0x3d5b09[_0x327418];await _0x31e5cd[_0x4058cf(0x251)](addLanguageColumn,_0x34d908);}else console[_0x4058cf(0x1ef)](_0x31e5cd[_0x4058cf(0x24a)]);}server[_0x4058cf(0x24b)](port,()=>{const _0x3fe790=_0x4058cf;console[_0x3fe790(0x1ef)](_0x3fe790(0x203)+port+'!');});});