<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ŸÑÿπÿ®ÿ© ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑŸÉŸÑŸÖÿßÿ™ ŸÑŸÑÿ£ÿ∑ŸÅÿßŸÑ</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700;900&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: 'Vazirmatn', 'Cairo', 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(135deg, #87CEEB 0%, #98D8E8 50%, #B0E0E6 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    /* Floating clouds animation */
    .cloud {
      position: absolute;
      background: white;
      border-radius: 100px;
      opacity: 0.7;
      animation: float 20s infinite ease-in-out;
    }

    .cloud:before, .cloud:after {
      content: '';
      position: absolute;
      background: white;
      border-radius: 100px;
    }

    .cloud-1 {
      width: 100px;
      height: 40px;
      top: 10%;
      left: -100px;
      animation-delay: 0s;
    }

    .cloud-2 {
      width: 80px;
      height: 35px;
      top: 30%;
      left: -80px;
      animation-delay: 5s;
    }

    .cloud-3 {
      width: 120px;
      height: 45px;
      top: 60%;
      left: -120px;
      animation-delay: 10s;
    }

    @keyframes float {
      0% { transform: translateX(0); }
      100% { transform: translateX(calc(100vw + 200px)); }
    }

    /* Stars decoration */
    .star {
      position: absolute;
      font-size: 1.5em;
      animation: twinkle 2s ease-in-out infinite;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 1; transform: scale(1) rotate(0deg); }
      50% { opacity: 0.3; transform: scale(1.3) rotate(180deg); }
    }

    .container {
      background: linear-gradient(135deg, #FFF9E6 0%, #FFFACD 100%);
      border-radius: 30px;
      padding: 40px;
      max-width: 700px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      border: 6px solid white;
      position: relative;
      z-index: 1;
    }

    /* Welcome Screen */
    .welcome-screen {
      text-align: center;
    }

    .welcome-screen h1 {
      color: #FF6B9D;
      font-size: 2.8em;
      font-weight: 900;
      margin-bottom: 20px;
      text-shadow: 3px 3px 0px #FFD93D;
      animation: bounceIn 1s ease;
    }

    @keyframes bounceIn {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }

    .welcome-emoji {
      font-size: 5em;
      margin: 20px 0;
      animation: wave 2s ease-in-out infinite;
    }

    @keyframes wave {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-10deg); }
      75% { transform: rotate(10deg); }
    }

    .input-group {
      margin: 30px 0;
    }

    .input-group label {
      display: block;
      font-size: 1.5em;
      font-weight: 700;
      color: #6C5CE7;
      margin-bottom: 10px;
    }

    .input-group input {
      width: 100%;
      padding: 15px 20px;
      font-size: 1.3em;
      border: 4px solid #FF6B9D;
      border-radius: 15px;
      font-family: inherit;
      text-align: center;
      background: white;
      transition: all 0.3s ease;
    }

    .input-group input:focus {
      outline: none;
      border-color: #6C5CE7;
      box-shadow: 0 0 20px rgba(108, 92, 231, 0.3);
      transform: scale(1.02);
    }

    .start-btn {
      padding: 20px 50px;
      font-size: 1.5em;
      font-weight: 900;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      background: linear-gradient(135deg, #00D2FF 0%, #3A7BD5 100%);
      color: white;
      border: 4px solid white;
      box-shadow: 0 8px 25px rgba(0, 210, 255, 0.5);
      transition: all 0.3s ease;
      font-family: inherit;
      margin-top: 20px;
    }

    .start-btn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 12px 35px rgba(0, 210, 255, 0.7);
    }

    .start-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* Progress Bar */
    .progress-container {
      margin-bottom: 30px;
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .student-name {
      font-size: 1.3em;
      font-weight: 700;
      color: #6C5CE7;
    }

    .progress-text {
      font-size: 1.2em;
      font-weight: 700;
      color: #FF6B9D;
    }

    .progress-bar-bg {
      width: 100%;
      height: 30px;
      background: white;
      border-radius: 15px;
      border: 4px solid #FF6B9D;
      overflow: hidden;
      box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #00D2FF 0%, #00E676 100%);
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 10px;
      font-weight: 900;
      color: white;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    }

    /* Game Screen */
    .game-screen {
      display: none;
    }

    h2 {
      text-align: center;
      color: #FF6B9D;
      margin-bottom: 20px;
      font-size: 2em;
      font-weight: 900;
      text-shadow: 2px 2px 0px #FFD93D;
    }

    .word-display {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
      min-height: 100px;
      align-items: center;
    }

    .word-container {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .word-box {
      min-width: 220px;
      min-height: 90px;
      border: 4px dashed #FF6B9D;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 15px 25px;
      background: white;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 107, 157, 0.2);
    }

    .word-box.has-letters {
      background: linear-gradient(135deg, #6C5CE7 0%, #A29BFE 100%);
      border: 4px solid #6C5CE7;
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(108, 92, 231, 0.4);
    }

    .combined-word {
      font-size: 3em;
      font-weight: 900;
      color: #FFD93D;
      letter-spacing: 2px;
      direction: rtl;
      transition: all 0.3s ease;
    }

    .word-box.has-letters .combined-word {
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
    }

    .slots-indicator {
      display: flex;
      gap: 8px;
      flex-direction: row-reverse;
    }

    .slot-dot {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #FFD93D;
      border: 3px solid white;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(255, 217, 61, 0.4);
    }

    .slot-dot.filled {
      background: #00D2FF;
      border-color: #0099CC;
      transform: scale(1.3);
      box-shadow: 0 4px 15px rgba(0, 210, 255, 0.6);
      animation: pulse 0.4s ease;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1.3); }
      50% { transform: scale(1.5); }
    }

    .letters-container {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .letter-tile {
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, #FF6B9D 0%, #FFD93D 100%);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      font-weight: 900;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(255, 107, 157, 0.5);
      user-select: none;
      border: 4px solid white;
      text-shadow: 2px 2px 4px rgba(196, 69, 105, 0.5);
    }

    .letter-tile:hover {
      transform: translateY(-8px) rotate(-5deg) scale(1.1);
      box-shadow: 0 12px 30px rgba(255, 107, 157, 0.7);
    }

    .letter-tile:active {
      transform: translateY(-4px) scale(1.05);
    }

    .letter-tile.used {
      opacity: 0.3;
      cursor: not-allowed;
      transform: scale(0.85);
      filter: grayscale(70%);
    }

    .letter-tile.used:hover {
      transform: scale(0.85);
    }

    .controls {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    button {
      padding: 15px 30px;
      font-size: 1.2em;
      font-weight: 900;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
      border: 4px solid white;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .check-btn {
      background: linear-gradient(135deg, #00D2FF 0%, #3A7BD5 100%);
      color: white;
      box-shadow: 0 6px 20px rgba(0, 210, 255, 0.5);
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
    }

    .check-btn:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 10px 30px rgba(0, 210, 255, 0.7);
    }

    .clear-btn {
      background: linear-gradient(135deg, #FFA500 0%, #FF6347 100%);
      color: white;
      box-shadow: 0 6px 20px rgba(255, 165, 0, 0.5);
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
    }

    .clear-btn:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 10px 30px rgba(255, 165, 0, 0.7);
    }

    .next-btn {
      background: linear-gradient(135deg, #00E676 0%, #00C853 100%);
      color: white;
      box-shadow: 0 6px 20px rgba(0, 230, 118, 0.5);
      display: none;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
    }

    .next-btn:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 10px 30px rgba(0, 230, 118, 0.7);
    }

    .message {
      text-align: center;
      font-size: 1.6em;
      font-weight: 900;
      margin-top: 15px;
      min-height: 45px;
      transition: all 0.3s ease;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .message.correct {
      color: #00E676;
      animation: bounce 0.6s ease;
      font-size: 1.8em;
    }

    .message.wrong {
      color: #FF4757;
      animation: shake 0.5s ease;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      25% { transform: translateY(-15px); }
      50% { transform: translateY(0); }
      75% { transform: translateY(-8px); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      50% { transform: translateX(8px); }
      75% { transform: translateX(-4px); }
    }

    @keyframes celebrate {
      0% { transform: scale(1) rotate(0deg); }
      25% { transform: scale(1.15) rotate(3deg); }
      50% { transform: scale(1.1) rotate(-3deg); }
      75% { transform: scale(1.15) rotate(3deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    .celebrate {
      animation: celebrate 0.6s ease;
    }

    /* Results Screen */
    .results-screen {
      display: none;
      text-align: center;
    }

    .results-screen h1 {
      color: #FF6B9D;
      font-size: 2.5em;
      font-weight: 900;
      margin-bottom: 20px;
      text-shadow: 3px 3px 0px #FFD93D;
      animation: bounceIn 1s ease;
    }

    .trophy {
      font-size: 8em;
      margin: 20px 0;
      animation: trophy-spin 2s ease-in-out;
    }

    @keyframes trophy-spin {
      0% { transform: scale(0) rotate(-180deg); }
      60% { transform: scale(1.2) rotate(20deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    .score-display {
      background: linear-gradient(135deg, #6C5CE7 0%, #A29BFE 100%);
      border-radius: 20px;
      padding: 30px;
      margin: 30px 0;
      border: 4px solid white;
      box-shadow: 0 8px 25px rgba(108, 92, 231, 0.4);
    }

    .score-display h2 {
      color: white;
      font-size: 2em;
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .score-number {
      font-size: 4em;
      font-weight: 900;
      color: #FFD93D;
      text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.2);
    }

    .encouragement {
      font-size: 1.5em;
      color: #6C5CE7;
      font-weight: 700;
      margin: 20px 0;
      padding: 15px;
      background: white;
      border-radius: 15px;
      border: 3px solid #FF6B9D;
    }

    .restart-btn {
      padding: 20px 50px;
      font-size: 1.5em;
      font-weight: 900;
      background: linear-gradient(135deg, #00E676 0%, #00C853 100%);
      color: white;
      border: 4px solid white;
      box-shadow: 0 8px 25px rgba(0, 230, 118, 0.5);
      margin-top: 20px;
    }

    .restart-btn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 12px 35px rgba(0, 230, 118, 0.7);
    }

    .hidden {
      display: none;
    }

    @media (max-width: 640px) {
      .container {
        padding: 20px;
      }

      h1 {
        font-size: 1.8em;
      }

      .letter-tile {
        width: 60px;
        height: 60px;
        font-size: 1.8em;
      }

      button {
        padding: 12px 20px;
        font-size: 1em;
      }
    }
  </style>
</head>
<body>
  <!-- Decorative clouds -->
  <div class="cloud cloud-1"></div>
  <div class="cloud cloud-2"></div>
  <div class="cloud cloud-3"></div>

  <!-- Stars decoration -->
  <div class="star" style="top: 15%; right: 10%;">‚≠ê</div>
  <div class="star" style="top: 70%; right: 15%; animation-delay: 1s;">‚ú®</div>
  <div class="star" style="top: 25%; left: 12%; animation-delay: 0.5s;">üåü</div>
  <div class="star" style="bottom: 20%; left: 18%; animation-delay: 1.5s;">‚≠ê</div>

  <div class="container">
    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
      <h1>üéÆ ŸÑÿπÿ®ÿ© ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑŸÉŸÑŸÖÿßÿ™ üéÆ</h1>
      <div class="welcome-emoji">üëã</div>
      <div class="input-group">
        <label>ŸÖÿß ÿßÿ≥ŸÖŸÉÿü</label>
        <input type="text" id="studentName" placeholder="ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖŸÉ ŸáŸÜÿß" maxlength="20">
      </div>
      <button class="start-btn" id="startBtn" disabled>ÿßÿ®ÿØÿ£ ÿßŸÑŸÑÿπÿ®ÿ©! üöÄ</button>
    </div>

    <!-- Game Screen -->
    <div class="game-screen" id="gameScreen">
      <div class="progress-container">
        <div class="progress-info">
          <div class="student-name" id="displayName">üéì ÿßŸÑÿ∑ÿßŸÑÿ®: </div>
          <div class="progress-text" id="progressText">ÿßŸÑÿ≥ÿ§ÿßŸÑ 1 ŸÖŸÜ 7</div>
        </div>
        <div class="progress-bar-bg">
          <div class="progress-bar-fill" id="progressBar">0%</div>
        </div>
      </div>

      <h2>ÿ±ÿ™ÿ® ÿßŸÑÿ≠ÿ±ŸàŸÅ ŸÑÿ™ŸÉŸàŸäŸÜ ÿßŸÑŸÉŸÑŸÖÿ©</h2>
      <div class="word-display">
        <div class="word-container">
          <div class="word-box" id="wordBox">
            <div class="combined-word" id="combinedWord">ÿü</div>
          </div>
          <div class="slots-indicator" id="slotsIndicator"></div>
        </div>
      </div>
      <div class="letters-container" id="lettersContainer"></div>
      <div class="controls">
        <button class="clear-btn" id="clearBtn">ŸÖÿ≥ÿ≠ üóëÔ∏è</button>
        <button class="check-btn" id="checkBtn">ÿ™ÿ≠ŸÇŸÇ ‚úì</button>
        <button class="next-btn" id="nextBtn">ÿßŸÑÿ™ÿßŸÑŸä ‚û°Ô∏è</button>
      </div>
      <div class="message" id="message"></div>
    </div>

    <!-- Results Screen -->
    <div class="results-screen" id="resultsScreen">
      <h1>üéä ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© üéä</h1>
      <div class="trophy">üèÜ</div>
      <div class="score-display">
        <h2 id="finalStudentName"></h2>
        <div class="score-number" id="finalScore">0/7</div>
      </div>
      <div class="encouragement" id="encouragement"></div>
      <button class="restart-btn" id="restartBtn">ÿßŸÑÿπÿ® ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ! üîÑ</button>
    </div>
  </div>

  <script>
    // Game configuration - easily editable
    const gameConfig = {
      words: [
        { letters: ['ÿ∑', 'ÿß', 'ŸÑ', 'ÿ®'], correct: 'ÿ∑ÿßŸÑÿ®' },
        { letters: ['ŸÉ', 'ÿ™', 'ÿß', 'ÿ®'], correct: 'ŸÉÿ™ÿßÿ®' },
        { letters: ['ŸÖ', 'ÿØ', 'ÿ±', 'ÿ≥', 'ÿ©'], correct: 'ŸÖÿØÿ±ÿ≥ÿ©' },
        { letters: ['ŸÇ', 'ŸÑ', 'ŸÖ'], correct: 'ŸÇŸÑŸÖ' },
        { letters: ['ÿ®', 'Ÿä', 'ÿ™'], correct: 'ÿ®Ÿäÿ™' },
        { letters: ['ÿ¥', 'ŸÖ', 'ÿ≥'], correct: 'ÿ¥ŸÖÿ≥' },
        { letters: ['Ÿà', 'ÿ±', 'ÿØ', 'ÿ©'], correct: 'Ÿàÿ±ÿØÿ©' }
      ],
      messages: {
        correct: 'ŸÖŸÖÿ™ÿßÿ≤! ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿµÿ≠Ÿäÿ≠ÿ©! üéâ',
        wrong: 'ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ! ü§î',
        incomplete: 'ÿ£ŸÉŸÖŸÑ ÿßŸÑŸÉŸÑŸÖÿ© ÿ£ŸàŸÑÿßŸã! üìù'
      },
      encouragements: {
        perfect: 'ÿ±ÿßÿ¶ÿπ ÿ¨ÿØÿßŸã! ÿ£ŸÜÿ™ ÿ®ÿ∑ŸÑ! üèÜ',
        excellent: 'ŸÖŸÖÿ™ÿßÿ≤! ÿπŸÖŸÑ ÿ±ÿßÿ¶ÿπ! üåü',
        good: 'ÿ¨ŸäÿØ ÿ¨ÿØÿßŸã! ÿßÿ≥ÿ™ŸÖÿ±! üëç',
        tryAgain: 'ÿ¨ŸäÿØ! ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ! üí™'
      }
    };

    // Game state
    let studentName = '';
    let currentWordIndex = 0;
    let currentWord = null;
    let userAnswer = [];
    let correctAnswers = 0;
    let audioContext = null;

    // DOM elements
    const welcomeScreen = document.getElementById('welcomeScreen');
    const gameScreen = document.getElementById('gameScreen');
    const resultsScreen = document.getElementById('resultsScreen');
    const studentNameInput = document.getElementById('studentName');
    const startBtn = document.getElementById('startBtn');
    const displayName = document.getElementById('displayName');
    const progressText = document.getElementById('progressText');
    const progressBar = document.getElementById('progressBar');
    const combinedWord = document.getElementById('combinedWord');
    const wordBox = document.getElementById('wordBox');
    const slotsIndicator = document.getElementById('slotsIndicator');
    const lettersContainer = document.getElementById('lettersContainer');
    const message = document.getElementById('message');
    const clearBtn = document.getElementById('clearBtn');
    const checkBtn = document.getElementById('checkBtn');
    const nextBtn = document.getElementById('nextBtn');
    const finalStudentName = document.getElementById('finalStudentName');
    const finalScore = document.getElementById('finalScore');
    const encouragement = document.getElementById('encouragement');
    const restartBtn = document.getElementById('restartBtn');

    // Audio functions
    function initAudio() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
    }

    function playSound(frequency, duration, type = 'sine') {
      initAudio();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.value = frequency;
      oscillator.type = type;
      
      gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + duration);
    }

    function playCorrectSound() {
      playSound(523.25, 0.15);
      setTimeout(() => playSound(659.25, 0.15), 100);
      setTimeout(() => playSound(783.99, 0.25), 200);
    }

    function playWrongSound() {
      playSound(200, 0.12, 'sawtooth');
      setTimeout(() => playSound(150, 0.25, 'sawtooth'), 120);
    }

    function playClickSound() {
      playSound(400, 0.08, 'square');
    }

    function playWinSound() {
      const notes = [523.25, 587.33, 659.25, 783.99, 880.00];
      notes.forEach((note, i) => {
        setTimeout(() => playSound(note, 0.2), i * 100);
      });
    }

    // Enable start button when name is entered
    studentNameInput.addEventListener('input', (e) => {
      startBtn.disabled = e.target.value.trim().length === 0;
    });

    studentNameInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !startBtn.disabled) {
        startGame();
      }
    });

    // Start game
    startBtn.addEventListener('click', startGame);

    function startGame() {
      studentName = studentNameInput.value.trim();
      if (!studentName) return;

      playClickSound();
      welcomeScreen.classList.add('hidden');
      gameScreen.style.display = 'block';
      displayName.textContent = `üéì ÿßŸÑÿ∑ÿßŸÑÿ®: ${studentName}`;
      
      currentWordIndex = 0;
      correctAnswers = 0;
      loadWord();
    }

    // Shuffle array
    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }

    // Load word
    function loadWord() {
      if (currentWordIndex >= gameConfig.words.length) {
        showResults();
        return;
      }

      currentWord = gameConfig.words[currentWordIndex];
      userAnswer = [];
      
      // Update progress
      const progress = ((currentWordIndex) / gameConfig.words.length) * 100;
      progressBar.style.width = progress + '%';
      progressBar.textContent = Math.round(progress) + '%';
      progressText.textContent = `ÿßŸÑÿ≥ÿ§ÿßŸÑ ${currentWordIndex + 1} ŸÖŸÜ ${gameConfig.words.length}`;
      
      // Reset UI
      combinedWord.textContent = 'ÿü';
      wordBox.classList.remove('has-letters');
      slotsIndicator.innerHTML = '';
      lettersContainer.innerHTML = '';
      message.textContent = '';
      message.className = 'message';
      nextBtn.style.display = 'none';
      
      // Create slots
      for (let i = 0; i < currentWord.correct.length; i++) {
        const dot = document.createElement('div');
        dot.className = 'slot-dot';
        slotsIndicator.appendChild(dot);
      }
      
      // Create letter tiles
      const shuffledLetters = shuffleArray(currentWord.letters);
      shuffledLetters.forEach((letter, index) => {
        const tile = document.createElement('div');
        tile.className = 'letter-tile';
        tile.textContent = letter;
        tile.dataset.letter = letter;
        tile.addEventListener('click', () => handleLetterClick(tile));
        lettersContainer.appendChild(tile);
      });
    }

    // Handle letter click
    function handleLetterClick(tile) {
      if (tile.classList.contains('used')) return;
      
      playClickSound();
      
      const letter = tile.dataset.letter;
      userAnswer.push(letter);
      tile.classList.add('used');
      
      updateWordDisplay();
    }
    
    // Update word display
    function updateWordDisplay() {
      const dots = document.querySelectorAll('.slot-dot');
      
      if (userAnswer.length > 0) {
        combinedWord.textContent = userAnswer.join('');
        wordBox.classList.add('has-letters');
      } else {
        combinedWord.textContent = 'ÿü';
        wordBox.classList.remove('has-letters');
      }
      
      dots.forEach((dot, index) => {
        if (index < userAnswer.length) {
          dot.classList.add('filled');
        } else {
          dot.classList.remove('filled');
        }
      });
    }

    // Clear answer
    clearBtn.addEventListener('click', clearAnswer);
    
    function clearAnswer() {
      playClickSound();
      userAnswer = [];
      
      updateWordDisplay();
      
      const tiles = document.querySelectorAll('.letter-tile');
      tiles.forEach(tile => {
        tile.classList.remove('used');
      });
      
      message.textContent = '';
      message.className = 'message';
    }

    // Check answer
    checkBtn.addEventListener('click', checkAnswer);
    
    function checkAnswer() {
      const answer = userAnswer.join('');
      
      if (answer.length !== currentWord.correct.length) {
        message.textContent = gameConfig.messages.incomplete;
        message.className = 'message wrong';
        playWrongSound();
        return;
      }
      
      if (answer === currentWord.correct) {
        message.textContent = gameConfig.messages.correct;
        message.className = 'message correct';
        playCorrectSound();
        correctAnswers++;
        
        wordBox.classList.add('celebrate');
        setTimeout(() => wordBox.classList.remove('celebrate'), 600);
        
        nextBtn.style.display = 'inline-block';
        checkBtn.disabled = true;
      } else {
        message.textContent = gameConfig.messages.wrong;
        message.className = 'message wrong';
        playWrongSound();
        
        setTimeout(() => {
          clearAnswer();
        }, 1200);
      }
    }

    // Next question
    nextBtn.addEventListener('click', () => {
      playClickSound();
      currentWordIndex++;
      checkBtn.disabled = false;
      loadWord();
    });

    // Show results
    function showResults() {
      playWinSound();
      
      gameScreen.style.display = 'none';
      resultsScreen.style.display = 'block';
      
      finalStudentName.textContent = studentName;
      finalScore.textContent = `${correctAnswers}/${gameConfig.words.length}`;
      
      // Set encouragement based on score
      const percentage = (correctAnswers / gameConfig.words.length) * 100;
      if (percentage === 100) {
        encouragement.textContent = gameConfig.encouragements.perfect;
      } else if (percentage >= 75) {
        encouragement.textContent = gameConfig.encouragements.excellent;
      } else if (percentage >= 50) {
        encouragement.textContent = gameConfig.encouragements.good;
      } else {
        encouragement.textContent = gameConfig.encouragements.tryAgain;
      }
      
      // Update progress to 100%
      progressBar.style.width = '100%';
      progressBar.textContent = '100%';
    }

    // Restart game
    restartBtn.addEventListener('click', () => {
      playClickSound();
      
      resultsScreen.style.display = 'none';
      welcomeScreen.classList.remove('hidden');
      
      studentNameInput.value = '';
      startBtn.disabled = true;
      currentWordIndex = 0;
      correctAnswers = 0;
    });
  </script>
</body>
</html>
